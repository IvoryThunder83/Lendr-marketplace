<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @item.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @item.description %>
</p>

<%# Lendr: Add image to display on a single Item page %>
<%= image_tag @item.image %>

<p>
  <strong>Terms:</strong>
  <%= @item.terms %>
</p>

<p>
  <strong>Price:</strong>
  <%# Lendr: Add styling for pricing to display correctly %>
  <%= number_to_currency(@item.price/100.0) %>
</p>

<p>
  <strong>Street:</strong>
  <%= @item.street %>
</p>

<p>
  <strong>Suburb:</strong>
  <%= @item.suburb %>
</p>

<p>
  <strong>State:</strong>
  <%= @item.state %>
</p>

<p>
  <strong>Postcode:</strong>
  <%= @item.postcode %>
</p>

<%= form_tag charges_path do %>
  <%# Lendr: To add Stripe form for payment, add custom Item attributes  %>
  <article>
    <% if flash[:error].present? %>
      <div id="error_explanation">
        <p><%= flash[:error] %></p>
      </div>
    <% end %>
  </article>
  <%= hidden_field_tag(:item_id, @item.id) %>
  <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
          data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
          data-description="<%= @item.name %>"
          data-amount="<%= @item.price %>"
          data-currency="AUD"
          data-locale="auto"></script>
<% end %>


<%= form_for Comment.new, url: comments_path do |f| %>
  <%= f.label :review %>
  <%= f.text_field :review %>
   <%= f.label :rating %>
  <%= f.text_field :rating %>
   <%= f.label :role %>
  <%= f.text_field :role %>
  <%= f.hidden_field(:item_id, value: @item.id) %>
  <%= f.submit "Create" %>
<% end %>

<p>
  <strong>Comments</strong>
  <% @item.comments.each do |comment| %>
    <div>
      <%= comment.review %>
      <p><em> posted by <strong><%= comment.user.email %> </strong></em></p>
      <hr>
    </div>
  <% end %>

</p>

<% if @item.user == current_user %>  
  <%= link_to 'Edit', edit_item_path(@item) %> |
<% end %>
<%= link_to 'Back', items_path %>
